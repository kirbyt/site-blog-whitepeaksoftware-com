<!DOCTYPE html>
<!--[if IE 8]> <html lang="en" class="ie8"> <![endif]-->
<!--[if IE 9]> <html lang="en" class="ie9"> <![endif]-->
<!--[if !IE]><!--> <html lang="en"> <!--<![endif]-->

<head>

    <meta charset="utf-8" />

    <!-- Always force latest IE rendering engine or request Chrome Frame -->
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="I ran into an interesting bug today while testing Hey Peanut on iOS 4. For those who don’t know, Hey Peanut is a universal binary, which means it runs on both the iPhone and iPad. My iPhone has the GM version of iOS 4 installed on it, which I’m using to test my apps under iOS 4.

" />

    <link rel="canonical" href="http://blog.whitepeaksoftware.com/2010/06/10/using-uipopovercontroller-with-ios-4/">

    <meta property="og:locale" content="en_US" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Using UIPopoverController with iOS 4 - White Peak Software Blog" />
    <meta property="og:description" content="I ran into an interesting bug today while testing Hey Peanut on iOS 4. For those who don’t know, Hey Peanut is a universal binary, which means it runs on both the iPhone and iPad. My iPhone has the GM version of iOS 4 installed on it, which I’m using to test my apps under iOS 4.

" />
    <meta property="og:url" content="http://blog.whitepeaksoftware.com/2010/06/10/using-uipopovercontroller-with-ios-4/" />
    <meta property="og:site_name" content="White Peak Software" />


    <title>Using UIPopoverController with iOS 4 - White Peak Software Blog</title>

    <link rel="alternate" type="application/atom+xml" title="White Peak Software Blog Feed" href="http://blog.whitepeaksoftware.com/atom.xml" />

    <!-- Favicon -->
    <link rel="shortcut icon" href="/assets-custom/img/favicon.png">

    <!-- Web Fonts -->
    <link rel="shortcut" type="text/css" href="//fonts.googleapis.com/css?family=Open+Sans:400,300,600&amp;subset=cyrillic,latin">

    <!-- CSS Global Compulsory -->
    <link rel="stylesheet" href="/assets/plugins/bootstrap/css/bootstrap.min.css">
    <link href="/assets/css/style.css" rel="stylesheet" />

    <!-- CSS Header and Footer -->
    <link href="/assets/css/headers/header-default.css" rel="stylesheet" />
    <link href="/assets/css/footers/footer-v1.css" rel="stylesheet" />



    <!-- CSS Implementing Plugins -->
    <link rel="stylesheet" href="/assets/plugins/animate.css">
    <link rel="stylesheet" href="/assets/plugins/line-icons/line-icons.css">
    <link rel="stylesheet" href="/assets/plugins/font-awesome/css/font-awesome.css">
    <link rel="stylesheet" href="/assets/plugins/owl-carousel/owl-carousel/owl.carousel.css">
    <link rel="stylesheet" href="/assets/plugins/layer-slider/layerslider/css/layerslider.css">


    <!-- CSS Page Style -->    
    <link rel="stylesheet" href="/assets/css/pages/blog.css">
    <link rel="stylesheet" href="/assets/css/pages/blog_magazine.css">




    <!-- Fancybox -->
    <link rel="stylesheet" href="/assets/plugins/fancybox/source/jquery.fancybox.css">


    <!-- CSS Theme -->
    <link href="/assets/css/theme-colors/blue.css" rel="stylesheet" />

    <!-- CSS Customization -->
    <link rel="stylesheet" href="/assets-custom/css/custom.css">

</head>


<body style="padding-top: 47px;">
  <div class='header'>
  <nav class='navbar navbar-default navbar-fixed-top' role='navigation'>
    <div class='container'>
      <div class='navbar-header'>
        <button class='navbar-toggle' data-target='.navbar-responsive-collapse' data-toggle='collapse' type='button'>
          <span class='sr-only'>
            Toggle navigation
          </span>
          <span class='fa fa-bars'></span>
        </button>
        <a class='navbar-brand' href='http://www.whitepeaksoftware.com/'>
          <img align='left' hspace='6px' src='/assets-custom/img/company-logo.png' style='max-width:100px; margin-top: -7px;'>WHITE PEAK SOFTWARE</img>
        </a>
      </div>
      <div class='collapse navbar-collapse navbar-responsive-collapse navbar-right'>
        <ul class='nav navbar-nav'>
          <li><a href="http://www.whitepeaksoftware.com/">Home</a></li>
          <li><a href="http://www.whitepeaksoftware.com/apps">Apps</a></li>
          <li><a href="http://www.whitepeaksoftware.com/roadmap">Hire Me</a></li>
          <li><a href="http://www.whitepeaksoftware.com/contact">Contact</a></li>
          <li class='active'><a href="/">Blog</a></li>
        </ul>
      </div>
    </div>
  </nav>
</div>



  <!--=== Content Part ===-->
  <div class="container content">
    <div class="row blog-page">
          <!-- Left Sidebar -->
        <div class="col-md-9">

          <!--Blog Post-->
<div class="blog margin-bottom-40">
  <h2><a href="">Using UIPopoverController with iOS 4</a></h2>
  <div class="blog-post-tags">
      <ul class="list-unstyled list-inline blog-info">
          <li><i class="fa fa-calendar"></i> June 10, 2010</li>
          <li><i class="fa fa-pencil"></i> Kirby Turner</li>
      </ul>

      
      <ul class="list-unstyled list-inline blog-tags">
          <li>
              <i class="fa fa-tags"></i>
              
          </li>
      </ul>
      
  </div>
  <p>I ran into an interesting bug today while testing Hey Peanut on iOS 4. For those who don’t know, Hey Peanut is a universal binary, which means it runs on both the iPhone and iPad. My iPhone has the GM version of iOS 4 installed on it, which I’m using to test my apps under iOS 4.</p>

<p>Because Hey Peanut can run on both the iPhone and iPad, my code must include certain checks to avoid crashes. One check the code makes is to determine if the class UIPopoverController is available or not. Prior to iOS 4, this class was only available in iOS 3.2. The current release of iOS on the iPhone is version 3.1.3, and it does not include this class. To make use of the popover I use code such as the following:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>   Class popoverControllerClass = NSClassFromString(@"UIPopoverController");

   if (popoverControllerClass) {

      popoverController_ = [[UIPopoverController alloc] initWithContentViewController:[self imagePicker]];

   }
</code></pre>
</div>

<p>Turns out there is a big problem with this code under iOS 4 causing Hey Peanut to crash each time. It wasn’t obvious to me at first why this code was failing but as I thought it more, and as I talked through the issue with an Apple engineer, I realized, “Duh! iOS 4 is running on the iPhone, not the iPad.” Simply checking for the existence of the class isn’t good enough any more. Instead, I need to also check the device type. So with a quick change to the code, shown below, I was able to fix the crash in Hey Peanut. The code now checks that the class is available and is running on a iPad.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>   Class popoverControllerClass = NSClassFromString(@"UIPopoverController");

   if (popoverControllerClass **&amp;&amp; UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad**) {

      popoverController_ = [[UIPopoverController alloc] initWithContentViewController:[self imagePicker]];

   }
</code></pre>
</div>


</div>
<!--End Blog Post-->

<hr>

<div class="text-center">
  <ul class="pagination">
    
    <li><a href="/2010/06/01/sales-are-down-but-revenue-is-up/" title="Previous Post: Sales are Down but Revenue is Up">&larr; Previous Post</a></li>
    

    <li><a href="/">Index</a></li>
    <li><a href="/blog/archives">Archive</a></li>

    
    <li><a href="/2010/06/14/score-one-for-the-little-guy-and-kudos-to-microsoft/" title="Next Post: Score One for the Little Guy and Kudos to Microsoft">Next Post &rarr;</a></li>
    
  </ul>
</div>


        </div>
        <!-- End Left Sidebar -->

        <!-- Right Sidebar -->
        <div class="col-md-3 magazine-page">

          <!-- Posts -->
          <div class="posts margin-bottom-40">
              <div class="headline headline-md"><h2>Recent Posts</h2></div>
              
                <ul class="list-unstyled recent-post">
                  <li>
                    <a href="/2016/01/01/2015-year-in-review/">2015 Year In Review</a>
                    <small>January 01, 2016</small>
                  </li>
                </ul>
              
                <ul class="list-unstyled recent-post">
                  <li>
                    <a href="/2015/11/20/special-offer-for-killink-csv-editor-customers/">Special Offer For Killink CSV Editor Customers</a>
                    <small>November 20, 2015</small>
                  </li>
                </ul>
              
                <ul class="list-unstyled recent-post">
                  <li>
                    <a href="/2015/08/18/killinks-retirement/">ANN: Killink's Retirement</a>
                    <small>August 18, 2015</small>
                  </li>
                </ul>
              
                <ul class="list-unstyled recent-post">
                  <li>
                    <a href="/2015/08/13/ann-peak-app-care/">ANN: Peak App Care</a>
                    <small>August 13, 2015</small>
                  </li>
                </ul>
              
                <ul class="list-unstyled recent-post">
                  <li>
                    <a href="/2015/03/25/quickly-post-photos-to-facebook/">Quickly Post Photos To Facebook</a>
                    <small>March 25, 2015</small>
                  </li>
                </ul>
              
          </div><!--/posts-->
          <!-- End Posts -->

          <!-- Blog Tags -->
          <div class="headline headline-md"><h2>Categories</h2></div>
          <ul class="list-unstyled blog-tags margin-bottom-30">
              <li class='category'><a href='/category/announcements/'>announcements (25)</a></li>
<li class='category'><a href='/category/big%20screen/'>big screen (1)</a></li>
<li class='category'><a href='/category/conferences/'>conferences (1)</a></li>
<li class='category'><a href='/category/cross%20post/'>cross post (3)</a></li>
<li class='category'><a href='/category/general/'>general (4)</a></li>
<li class='category'><a href='/category/hey%20peanut/'>hey peanut (5)</a></li>
<li class='category'><a href='/category/ios/'>ios (4)</a></li>
<li class='category'><a href='/category/killink%20csv/'>killink csv (3)</a></li>
<li class='category'><a href='/category/labor%20mate/'>labor mate (4)</a></li>
<li class='category'><a href='/category/peak%20app%20care/'>peak app care (1)</a></li>
<li class='category'><a href='/category/programming/'>programming (1)</a></li>
<li class='category'><a href='/category/smtp%20diagnostics/'>smtp diagnostics (1)</a></li>

          </ul>
          <!-- End Blog Tags -->


        </div>
        <!-- End Right Sidebar -->
      </div><!--/row-->
  </div><!--/container-->
  <!--=== End Content Part ===-->


  <!--=== Footer ===-->
<div class='footer-v1' id='footer-v1'>
  <div class='footer'>
    <div class='container'>
      <div class='row'>
        <div class='col-md-4 md-margin-bottom-40'>
          <div class='headline'>
            <h2 data-drip-attribute='headline'>Newsletter</h2>
          </div>
          <p data-drip-attribute='description'>Subscribe to our newsletter and stay up to date with the latest news and deals!</p>
          <form action='https://www.getdrip.com/forms/1196122/submissions' class='footer-subsribe' data-drip-embedded-form='1196122' id='formNewsletter' method='post'>
            <div class='input-group'>
              <input class='form-control' name='fields[email]' placeholder='Email Address' type='email'>
              <span class='input-group-btn'>
                <button class='btn-u' data-drip-attribute='sign-up-button' form='formNewsletter' type='submit' value='Subscribe'>Subscribe</button>
              </span>
            </div>
          </form>
        </div>
        <div class='col-md-4 md-margin-bottom-40'>
          <!-- .posts -->
          <!-- .headline -->
          <!-- %h2 Company News -->
          <!-- %ul.list-unstyled.link-list -->
          <!-- %li -->
          <!-- = link_to('ANN: Killink\'s Retirement', '/') -->
          <!-- %i.fa.fa-angle-right -->
          <!-- %li -->
          <!-- = link_to('ANN: Peak App Care', '/') -->
          <!-- %i.fa.fa-angle-right -->
          <!-- %li -->
          <!-- = link_to('ANN: Cross Post v1.2 is in the App Store', '/') -->
          <!-- %i.fa.fa-angle-right -->
          <!-- %li -->
          <!-- = link_to('More White Peak News...', '/') -->
          <!-- %i.fa.fa-angle-right -->
        </div>
        <div class='col-md-4 md-margin-bottom-40'>
          <div class='headline'>
            <h2>More Info</h2>
          </div>
          <ul class='list-unstyled link-list'>
            <li><a href="http://www.whitepeaksoftware.com/about">About Us</a></li>
            <li><a href="http://www.whitepeaksoftware.com/contact">Contact Us</a></li>
            <li><a href="http://www.whitepeaksoftware.com/retiredproducts">Retired Products</a></li>
            <li><a href="http://www.whitepeaksoftware.com/privacypolicy">Privacy Policy</a></li>
          </ul>
        </div>
      </div>
    </div>
  </div>
  <div class='copyright'>
    <div class='container'>
      <div class='row'>
        <div class='col-md-9'>
          <p>Copyright &copy; 2003-2015 White Peak Software, Inc. All Rights Reserved.</p>
        </div>
      </div>
    </div>
  </div>
</div>
<!--=== End Footer ===-->



  <!-- JS Global Compulsory -->
<script src="/assets/plugins/jquery/jquery.min.js"></script>
<script src="/assets/plugins/jquery/jquery-migrate.min.js"></script>
<script src="/assets/plugins/bootstrap/js/bootstrap.min.js"></script>

<!-- JS Implementing Plugins -->
<script src="/assets/plugins/back-to-top.js"></script>
<script src="/assets/plugins/smoothScroll.js"></script>
<script type="text/javascript" src="/assets/plugins/owl-carousel/owl-carousel/owl.carousel.js"></script>
<script type="text/javascript" src="/assets/plugins/layer-slider/layerslider/js/greensock.js"></script>
<script type="text/javascript" src="/assets/plugins/layer-slider/layerslider/js/layerslider.transitions.js"></script>
<script type="text/javascript" src="/assets/plugins/layer-slider/layerslider/js/layerslider.kreaturamedia.jquery.js"></script>

<!-- JS Customization -->
<script type="text/javascript" src="/assets/js/custom.js"></script>

<!-- JS Page Level -->
<script type="text/javascript" src="/assets/js/app.js"></script>

<script type="text/javascript" src="/assets/plugins/fancybox/source/jquery.fancybox.pack.js"></script>
<script type="text/javascript" src="/assets/js/plugins/fancy-box.js"></script>


<script type="text/javascript" src="/assets/js/plugins/owl-carousel.js"></script>
<script type="text/javascript" src="/assets/js/plugins/layer-slider.js"></script>

<script type="text/javascript">
    jQuery(document).ready(function() {
        App.init();
        FancyBox.initFancybox();
        OwlCarousel.initOwlCarousel();
        LayerSlider.initLayerSlider();
    });
</script>

<!--[if lt IE 9]>
    <script src="/assets/plugins/respond.js"></script>
    <script src="/assets/plugins/html5shiv.js"></script>
    <script src="/assets/plugins/placeholder-IE-fixes.js"></script>
<![endif]-->

<script type="text/javascript" src="/assets-custom/js/retina.min.js"></script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-167605-2', 'auto');
  ga('send', 'pageview');

</script>

<!-- Drip -->
<script type="text/javascript">
  var _dcq = _dcq || [];
  var _dcs = _dcs || {}; 
  _dcs.account = '4071369';
  
  (function() {
    var dc = document.createElement('script');
    dc.type = 'text/javascript'; dc.async = true; 
    dc.src = '//tag.getdrip.com/4071369.js';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(dc, s);
  })();
</script>


</body>
</html>
